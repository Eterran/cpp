<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Reference - CppBacktester Documentation</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>CppBacktester</h1>
        <p>API Reference</p>
    </header>

    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="installation.html">Installation</a></li>
            <li><a href="usage.html">Usage Guide</a></li>
            <li><a href="api.html" class="active">API Reference</a></li>
            <li><a href="examples.html">Examples</a></li>
        </ul>
    </nav>

    <main>
        <section class="container">
            <h2>C++ API Reference</h2>
            <p>
                This section provides detailed documentation for the C++ API of CppBacktester.
            </p>

            <h3>Backtester Class</h3>
            <p>The main class for running backtests.</p>
            <pre><code>class Backtester {
public:
    // Constructors
    Backtester();
    explicit Backtester(const BacktesterConfig& config);
    
    // Configuration methods
    void setStartDate(const std::string& date);
    void setEndDate(const std::string& date);
    void setInitialCapital(double capital);
    void setCommissionModel(std::shared_ptr<CommissionModel> model);
    void setSlippageModel(std::shared_ptr<SlippageModel> model);
    
    // Data loading
    void loadData(const std::string& filepath);
    void loadData(const std::vector<Bar>& bars);
    
    // Strategy management
    void setStrategy(std::shared_ptr<Strategy> strategy);
    
    // Execution
    BacktestResults run();
    
    // Accessors
    double getPortfolioValue() const;
    const Portfolio& getPortfolio() const;
    
    // Other methods...
};</code></pre>

            <h3>Strategy Base Class</h3>
            <p>Base class for implementing trading strategies.</p>
            <pre><code>class Strategy {
public:
    // Constructor and destructor
    Strategy();
    virtual ~Strategy();
    
    // Strategy lifecycle methods
    virtual void initialize();
    virtual void onBar(const Bar& bar) = 0;
    virtual void onOrderFilled(const Order& order);
    virtual void finalize();
    
    // Trading actions
    void buy(int quantity, const std::string& symbol, double limitPrice = 0.0);
    void sell(int quantity, const std::string& symbol, double limitPrice = 0.0);
    void buyToCover(int quantity, const std::string& symbol, double limitPrice = 0.0);
    void sellShort(int quantity, const std::string& symbol, double limitPrice = 0.0);
    void cancelOrder(const std::string& orderId);
    
    // Position and portfolio information
    Position getPosition(const std::string& symbol) const;
    double getPortfolioValue() const;
    double getCash() const;
    
    // Other methods...
};</code></pre>

            <h3>Bar Class</h3>
            <p>Represents a single price bar (OHLCV data).</p>
            <pre><code>class Bar {
public:
    // Constructors
    Bar();
    Bar(const std::string& symbol, const std::string& timestamp,
        double open, double high, double low, double close, double volume);
    
    // Data members
    std::string symbol;
    std::string timestamp;
    double open;
    double high;
    double low;
    double close;
    double volume;
    
    // Utility methods
    bool isValid() const;
    std::string toString() const;
};</code></pre>

            <h3>Order Class</h3>
            <p>Represents a trading order.</p>
            <pre><code>class Order {
public:
    // Order types
    enum class Type {
        MARKET,
        LIMIT,
        STOP,
        STOP_LIMIT
    };
    
    // Order sides
    enum class Side {
        BUY,
        SELL,
        BUY_TO_COVER,
        SELL_SHORT
    };
    
    // Order status
    enum class Status {
        PENDING,
        FILLED,
        PARTIALLY_FILLED,
        CANCELED,
        REJECTED
    };
    
    // Constructors
    Order();
    Order(const std::string& id, const std::string& symbol, Type type, Side side,
          int quantity, double price = 0.0, double stopPrice = 0.0);
    
    // Data members
    std::string id;
    std::string symbol;
    Type type;
    Side side;
    int quantity;
    int filledQuantity;
    double price;
    double stopPrice;
    double averageFillPrice;
    Status status;
    std::string timestamp;
    
    // Other methods...
};</code></pre>

            <h3>Position Class</h3>
            <p>Represents a position in a security.</p>
            <pre><code>class Position {
public:
    // Constructors
    Position();
    Position(const std::string& symbol, int quantity, double averagePrice);
    
    // Data members
    std::string symbol;
    int quantity;
    double averagePrice;
    double marketPrice;
    
    // Calculated properties
    double getMarketValue() const;
    double getUnrealizedPnL() const;
    double getRealizedPnL() const;
    
    // Position management
    void addShares(int quantity, double price);
    void removeShares(int quantity, double price);
    
    // Other methods...
};</code></pre>

            <h3>BacktestResults Class</h3>
            <p>Contains the results of a backtest.</p>
            <pre><code>class BacktestResults {
public:
    // Constructors
    BacktestResults();
    
    // Data members
    std::vector<double> equityCurve;
    std::vector<std::string> timestamps;
    std::vector<Trade> trades;
    
    // Performance metrics
    double getTotalReturn() const;
    double getAnnualizedReturn() const;
    double getSharpeRatio() const;
    double getMaxDrawdown() const;
    double getWinRate() const;
    double getProfitFactor() const;
    
    // Reporting
    void printSummary() const;
    void saveToFile(const std::string& filepath) const;
    
    // Other methods...
};</code></pre>

            <h3>ONNXModel Class</h3>
            <p>Interface for using ONNX Runtime models.</p>
            <pre><code>class ONNXModel {
public:
    // Constructors
    ONNXModel(const std::string& modelPath);
    
    // Inference methods
    std::vector<float> predict(const std::vector<float>& input);
    std::vector<float> predict(const float* input, size_t inputSize);
    
    // Model information
    std::vector<std::string> getInputNames() const;
    std::vector<std::string> getOutputNames() const;
    std::vector<std::vector<int64_t>> getInputShapes() const;
    std::vector<std::vector<int64_t>> getOutputShapes() const;
    
    // Other methods...
};</code></pre>
        </section>

        <section class="container">
            <h2>Python API Reference</h2>
            <p>
                This section provides detailed documentation for the Python API of CppBacktester.
            </p>

            <h3>Backtester Class</h3>
            <p>The main class for running backtests.</p>
            <pre><code>class Backtester:
    """Main class for running backtests."""
    
    def __init__(self, config=None):
        """Initialize a backtester instance.
        
        Args:
            config: Optional configuration dictionary
        """
        pass
    
    def set_start_date(self, date):
        """Set the start date for the backtest.
        
        Args:
            date: Start date string in 'YYYY-MM-DD' format
        """
        pass
    
    def set_end_date(self, date):
        """Set the end date for the backtest.
        
        Args:
            date: End date string in 'YYYY-MM-DD' format
        """
        pass
    
    def set_initial_capital(self, capital):
        """Set the initial capital for the backtest.
        
        Args:
            capital: Initial capital amount
        """
        pass
    
    def set_commission_model(self, model):
        """Set the commission model for the backtest.
        
        Args:
            model: CommissionModel instance
        """
        pass
    
    def set_slippage_model(self, model):
        """Set the slippage model for the backtest.
        
        Args:
            model: SlippageModel instance
        """
        pass
    
    def load_data(self, data):
        """Load data for the backtest.
        
        Args:
            data: Either a file path or a pandas DataFrame
        """
        pass
    
    def set_strategy(self, strategy):
        """Set the strategy for the backtest.
        
        Args:
            strategy: Strategy instance
        """
        pass
    
    def run(self):
        """Run the backtest.
        
        Returns:
            BacktestResults instance
        """
        pass
    
    def get_portfolio_value(self):
        """Get the current portfolio value.
        
        Returns:
            Current portfolio value
        """
        pass</code></pre>

            <h3>Strategy Class</h3>
            <p>Base class for implementing trading strategies.</p>
            <pre><code>class Strategy:
    """Base class for implementing trading strategies."""
    
    def __init__(self):
        """Initialize a strategy instance."""
        pass
    
    def initialize(self):
        """Initialize the strategy. Called once at the start of the backtest."""
        pass
    
    def on_bar(self, bar):
        """Process a new bar.
        
        Args:
            bar: Bar instance
        """
        pass
    
    def on_order_filled(self, order):
        """Handle a filled order.
        
        Args:
            order: Order instance
        """
        pass
    
    def finalize(self):
        """Finalize the strategy. Called once at the end of the backtest."""
        pass
    
    def buy(self, quantity, symbol, limit_price=0.0):
        """Buy a security.
        
        Args:
            quantity: Number of shares to buy
            symbol: Security symbol
            limit_price: Optional limit price (0 for market order)
        
        Returns:
            Order ID
        """
        pass
    
    def sell(self, quantity, symbol, limit_price=0.0):
        """Sell a security.
        
        Args:
            quantity: Number of shares to sell
            symbol: Security symbol
            limit_price: Optional limit price (0 for market order)
        
        Returns:
            Order ID
        """
        pass
    
    def buy_to_cover(self, quantity, symbol, limit_price=0.0):
        """Cover a short position.
        
        Args:
            quantity: Number of shares to cover
            symbol: Security symbol
            limit_price: Optional limit price (0 for market order)
        
        Returns:
            Order ID
        """
        pass
    
    def sell_short(self, quantity, symbol, limit_price=0.0):
        """Short sell a security.
        
        Args:
            quantity: Number of shares to short
            symbol: Security symbol
            limit_price: Optional limit price (0 for market order)
        
        Returns:
            Order ID
        """
        pass
    
    def cancel_order(self, order_id):
        """Cancel an order.
        
        Args:
            order_id: Order ID to cancel
        
        Returns:
            True if successful, False otherwise
        """
        pass
    
    def get_position(self, symbol):
        """Get the current position for a symbol.
        
        Args:
            symbol: Security symbol
        
        Returns:
            Position instance
        """
        pass
    
    def get_portfolio_value(self):
        """Get the current portfolio value.
        
        Returns:
            Current portfolio value
        """
        pass
    
    def get_cash(self):
        """Get the current cash balance.
        
        Returns:
            Current cash balance
        """
        pass</code></pre>

            <h3>BacktestResults Class</h3>
            <p>Contains the results of a backtest.</p>
            <pre><code>class BacktestResults:
    """Contains the results of a backtest."""
    
    def __init__(self):
        """Initialize a BacktestResults instance."""
        pass
    
    def get_total_return(self):
        """Get the total return of the backtest.
        
        Returns:
            Total return as a decimal (e.g., 0.15 for 15%)
        """
        pass
    
    def get_annualized_return(self):
        """Get the annualized return of the backtest.
        
        Returns:
            Annualized return as a decimal
        """
        pass
    
    def get_sharpe_ratio(self):
        """Get the Sharpe ratio of the backtest.
        
        Returns:
            Sharpe ratio
        """
        pass
    
    def get_max_drawdown(self):
        """Get the maximum drawdown of the backtest.
        
        Returns:
            Maximum drawdown as a decimal
        """
        pass
    
    def get_win_rate(self):
        """Get the win rate of the backtest.
        
        Returns:
            Win rate as a decimal
        """
        pass
    
    def get_profit_factor(self):
        """Get the profit factor of the backtest.
        
        Returns:
            Profit factor
        """
        pass
    
    def print_summary(self):
        """Print a summary of the backtest results."""
        pass
    
    def plot_equity_curve(self):
        """Plot the equity curve of the backtest."""
        pass
    
    def to_dataframe(self):
        """Convert the results to a pandas DataFrame.
        
        Returns:
            pandas DataFrame
        """
        pass
    
    def save_to_file(self, filepath):
        """Save the results to a file.
        
        Args:
            filepath: Path to save the results
        """
        pass</code></pre>

            <h3>ONNXModel Class</h3>
            <p>Interface for using ONNX Runtime models.</p>
            <pre><code>class ONNXModel:
    """Interface for using ONNX Runtime models."""
    
    def __init__(self, model_path):
        """Initialize an ONNXModel instance.
        
        Args:
            model_path: Path to the ONNX model file
        """
        pass
    
    def predict(self, input_data):
        """Run inference on the model.
        
        Args:
            input_data: Input data as a numpy array or list
        
        Returns:
            Prediction as a numpy array
        """
        pass
    
    def get_input_names(self):
        """Get the input names of the model.
        
        Returns:
            List of input names
        """
        pass
    
    def get_output_names(self):
        """Get the output names of the model.
        
        Returns:
            List of output names
        """
        pass
    
    def get_input_shapes(self):
        """Get the input shapes of the model.
        
        Returns:
            List of input shapes
        """
        pass
    
    def get_output_shapes(self):
        """Get the output shapes of the model.
        
        Returns:
            List of output shapes
        """
        pass</code></pre>
        </section>
    </main>

    <footer>
        <p>&copy; 2023 CppBacktester Project. All rights reserved.</p>
    </footer>
</body>
</html>
